-- test: namespace flag explicit --
-- command --
kubectl-actuator --namespace {{namespace}} --pod {{pod}} info
-- expect --
Application:
-- expect --
Name:         test-actuator-app
-- expect --
Description:  Test Spring Boot application with Actuator


-- test: port flag override --
-- command --
kubectl-actuator --pod {{pod}} --port 8080 health
-- expect --
COMPONENT
-- expect --
STATUS
-- expect --
[overall]
-- expect --
UP


-- test: multiple pod selection --
-- command --
kubectl-actuator --pod {{pod[0]}} --pod {{pod[1]}} info
-- expect:regex --
{{pod[0]}}:
-- expect --
Name:         test-actuator-app
-- expect:regex --
{{pod[1]}}:
-- expect --
Name:         test-actuator-app


-- test: deployment with namespace --
-- command --
kubectl-actuator --namespace {{namespace}} --deployment {{deployment}} health
-- expect:regex --
{{pod[0]}}:
-- expect --
COMPONENT
-- expect --
STATUS
-- expect --
[overall]
-- expect --
UP


-- test: label selector with namespace --
-- command --
kubectl-actuator --namespace {{namespace}} --selector component=backend info
-- expect:regex --
{{pod[0]}}:
-- expect --
Name:         test-actuator-app


-- test: base-path override --
-- command --
kubectl-actuator --pod {{pod}} --base-path /actuator health
-- expect:error --
Error:
-- expect:error --
404


-- test: context selection --
-- command --
kubectl-actuator --context invalid-context --pod {{pod}} health
-- expect:error --
Error:
-- expect:error --
context "invalid-context" does not exist
